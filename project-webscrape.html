<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Scraping Tool - Teega Narasimharao</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .project-page {
            padding-top: 80px;
        }

        .project-hero {
            text-align: center;
            padding: 4rem 0;
            position: relative;
        }

        .demo-container-full {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 0;
            margin: 2rem auto;
            max-width: 800px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            font-family: 'JetBrains Mono', monospace;
        }

        .terminal-header {
            background: #2d2d2d;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .red {
            background: #ff5f56;
        }

        .yellow {
            background: #ffbd2e;
        }

        .green {
            background: #27c93f;
        }

        .terminal-body {
            padding: 1rem;
            height: 350px;
            overflow-y: auto;
            color: #d4d4d4;
            font-size: 0.9rem;
        }

        .command-line {
            color: #fff;
            margin-bottom: 0.5rem;
        }

        .command-prompt {
            color: #b8ff3c;
            margin-right: 0.5rem;
        }

        .log-entry {
            margin-bottom: 0.2rem;
            display: block;
        }

        .log-success {
            color: #27c93f;
        }

        .log-info {
            color: #569cd6;
        }

        .log-warn {
            color: #ce9178;
        }

        .json-data {
            color: #ce9178;
            display: block;
            margin-left: 1rem;
        }

        .control-bar {
            padding: 1rem;
            background: rgba(45, 45, 45, 0.5);
            display: flex;
            gap: 1rem;
            justify-content: center;
            border-top: 1px solid #333;
        }
    </style>
</head>

<body>
    <header>
        <nav class="container">
            <a href="index.html#projects" class="back-link">‚Üê Back to Projects</a>
        </nav>
    </header>

    <main class="container project-page">
        <section class="project-hero animate-fade-up">
            <h1 class="hero-name">Automated Web Scraper</h1>
            <p class="hero-subtitle">High-Performance Data Extraction Engine</p>
            <div style="margin-top: 1.5rem;">
                <a href="#" class="btn-secondary"
                    style="display: inline-flex; align-items: center; gap: 0.5rem; text-decoration: none;">
                    <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                    View Source Code
                </a>
            </div>
        </section>

        <!-- Live Demo Section -->
        <section class="demo-section animate-fade-up delay-1">
            <div class="section-header">
                <h2 class="section-title">Terminal Simulation</h2>
                <div class="line"></div>
            </div>

            <div class="demo-container-full">
                <div class="terminal-header">
                    <span class="dot red"></span>
                    <span class="dot yellow"></span>
                    <span class="dot green"></span>
                    <span style="margin-left:10px; font-size:0.8rem; color:#888;">scraper_bot.py</span>
                </div>
                <div class="terminal-body" id="terminal">
                    <div class="command-line">
                        <span class="command-prompt">teega@portfolio:~/scraper$</span>
                        <span class="cursor" id="typing-cmd"></span>
                    </div>
                </div>
                <div class="control-bar">
                    <button class="btn-primary" id="start-scrape">Run Scraper</button>
                    <button class="btn-secondary" id="clear-term">Clear</button>
                </div>
            </div>
        </section>

        <section class="project-details grid-2-col animate-fade-up delay-2">
            <div class="details-left">
                <h3>Business Value & Impact</h3>
                <div
                    style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--primary-color); margin-bottom: 2rem;">
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.8rem;">ü§ñ <strong>Reduced Manual Work by 90%</strong> compared to
                            human data entry.</li>
                        <li style="margin-bottom: 0.8rem;">üì¶ <strong>100,000+ Products Scraped</strong> daily for
                            competitive pricing analysis.</li>
                        <li>üõ°Ô∏è <strong>Zero IP Bans</strong> achieved via intelligent rotating proxy integration.</li>
                    </ul>
                </div>

                <h3>About the Project</h3>
                <p>Data is the oil of the digital age. This Web Scraping Tool automates the collection of large-scale
                    datasets from e-commerce sites, social media, and news portals.</p>
                <p>Built with **Selenium and Beautiful Soup**, it features automatic IP rotation, CAPTCHA handling
                    simulation, and exports clean JSON/CSV data ready for analysis. It respects `robots.txt` and
                    implements ethical scraping delays.</p>
            </div>
            <div class="details-right">
                <h3>Tech Stack</h3>
                <div class="tags-container">
                    <span class="tag">Python</span>
                    <span class="tag">Selenium</span>
                    <span class="tag">Beautiful Soup</span>
                    <span class="tag">Requests</span>
                    <span class="tag">JSON</span>
                </div>
                <h3>Key Features</h3>
                <ul class="feature-list">
                    <li>Dynamic Content Rendering detection</li>
                    <li>Anti-bot detection evasion</li>
                    <li>Asynchronous processing</li>
                    <li>Scheduled Cron Jobs</li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Teega Narasimharao. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const terminal = document.getElementById('terminal');
        const startBtn = document.getElementById('start-scrape');
        const clearBtn = document.getElementById('clear-term');

        // Initial State
        const initialState = `
            <div class="command-line">
                <span class="command-prompt">teega@portfolio:~/scraper$</span>
                <span class="cursor" id="blinking-cursor">_</span>
            </div>
        `;

        function getLogs() {
            return [
                { text: "[INFO] Initializing WebDriver (Chrome/Headless) v114.0...", type: "log-info", delay: 200 },
                { text: "[INFO] Spoofing User-Agent String...", type: "log-info", delay: 300 },
                { text: "[INFO] Target: https://example-store.com/new-arrivals", type: "log-info", delay: 500 },
                { text: "[SUCCESS] Connected to server (200 OK)", type: "log-success", delay: 800 },
                { text: "[INFO] Parsing DOM tree...", type: "log-info", delay: 1000 },
                { text: "[DATA] Found 142 product nodes.", type: "log-warn", delay: 1200 },
                { text: "   > [1] 'Wireless Noise Cancelling Headphones' - $299", type: "json-data", delay: 1300 },
                { text: "   > [2] 'Mechanical Gaming Keyboard RGB' - $129", type: "json-data", delay: 1350 },
                { text: "   > [3] '4K Ultra HD Monitor 27inch' - $450", type: "json-data", delay: 1400 },
                { text: "   > [4] 'Smart Home Hub v2' - $89", type: "json-data", delay: 1450 },
                { text: "   > [5] 'Ergonomic Office Chair' - $350", type: "json-data", delay: 1500 },
                { text: "   ... (scrolling 137 more items)", type: "log-info", delay: 1600 },
                { text: "[INFO] Handling pagination: Page 2 loaded", type: "log-warn", delay: 1900 },
                { text: "[INFO] Rate limit safeguard: Sleeping 0.5s...", type: "log-info", delay: 2000 },
                { text: "[SUCCESS] Extracted 50 items from Page 2.", type: "log-success", delay: 2500 },
                { text: "[INFO] Aggregating data...", type: "log-info", delay: 2700 },
                { text: "[SUCCESS] Pipeline Complete. 192 Items Scraped.", type: "log-success", delay: 3000 },
                { text: "[INFO] Saving to output.csv...", type: "log-info", delay: 3200 },
                { text: "DONE", type: "done", delay: 3500 }
            ];
        }

        let isRunning = false;

        startBtn.addEventListener('click', async () => {
            if (isRunning) return;
            isRunning = true;

            // Remove cursor from previous line
            const cursor = document.getElementById('blinking-cursor');
            if (cursor) cursor.remove();

            // Add command execution line
            const cmdDiv = document.createElement('div');
            cmdDiv.className = 'command-line';
            cmdDiv.innerHTML = `<span class="command-prompt">teega@portfolio:~/scraper$</span> python scraper.py --target=store --format=csv --fast`;
            terminal.appendChild(cmdDiv);

            // Backend Handshake
            try {
                const div = document.createElement('span');
                div.className = `log-entry log-info`;
                div.innerText = "[SYSTEM] Connecting to Backend Grid Controller...";
                terminal.appendChild(div);

                const response = await fetch('http://localhost:5000/api/webscrape/start', {
                    method: 'POST'
                });

                if (!response.ok) throw new Error("Controller Offline");
                const data = await response.json();

                const div2 = document.createElement('span');
                div2.className = `log-entry log-success`;
                div2.innerText = `[SYSTEM] Job ${data.job_id} initiated successfully.`;
                terminal.appendChild(div2);

            } catch (error) {
                const div = document.createElement('span');
                div.className = `log-entry log-warn`;
                div.innerText = "[SYSTEM] Backend Controller Unreachable. Running in Local Simulation Mode.";
                terminal.appendChild(div);
            }

            const logs = getLogs();

            logs.forEach(log => {
                setTimeout(() => {
                    if (log.type === 'done') {
                        // New prompt
                        const div = document.createElement('div');
                        div.className = 'command-line';
                        div.innerHTML = `<span class="command-prompt">teega@portfolio:~/scraper$</span> <span class="cursor" id="blinking-cursor">_</span>`;
                        terminal.appendChild(div);

                        // Show Download Button in Terminal
                        const dlDiv = document.createElement('div');
                        dlDiv.style.marginTop = '10px';
                        dlDiv.innerHTML = `<button onclick="downloadCSV()" style="background:#27c93f; color:#000; border:none; padding:5px 10px; font-family:'JetBrains Mono'; cursor:pointer; font-weight:bold;">‚¨á Download output.csv (14KB)</button>`;
                        terminal.appendChild(dlDiv);
                        terminal.scrollTop = terminal.scrollHeight;

                        isRunning = false;
                    } else {
                        const div = document.createElement('span');
                        div.className = `log-entry ${log.type}`;
                        div.innerText = log.text;
                        terminal.appendChild(div);
                        terminal.scrollTop = terminal.scrollHeight;
                    }
                }, log.delay);
            });
        });

        clearBtn.addEventListener('click', () => {
            terminal.innerHTML = initialState;
            isRunning = false;
        });

        window.downloadCSV = function () {
            const csvContent = "data:text/csv;charset=utf-8,ID,Product Name,Price\n1,Wireless Noise Cancelling Headphones,299\n2,Mechanical Gaming Keyboard RGB,129\n3,4K Ultra HD Monitor 27inch,450";
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "scraped_data_sample.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };
    </script>
</body>

</html>